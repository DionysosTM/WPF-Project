<Window x:Class="projet_wpf.Views.EditTagsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Éditer les tags"
        Width="500" Height="350"
        MinWidth="400" MinHeight="300"
        Background="{DynamicResource PrimaryBackground}"
        Foreground="{DynamicResource PrimaryForeground}"
        WindowStartupLocation="CenterOwner">

    <Window.Resources>

        <Style x:Key="TagBadgeStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource TagBackgroundBrush}"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="8,4"/>
        </Style>

        <Style TargetType="Button" x:Key="TagRemoveButtonStyle">
            <Setter Property="Foreground" Value="{DynamicResource PrimaryForeground}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Width" Value="18"/>
            <Setter Property="Height" Value="18"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <ItemsControl ItemsSource="{Binding Tags}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource TagBadgeStyle}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Text}"
                                           Foreground="{DynamicResource PrimaryForeground}"
                                           VerticalAlignment="Center"
                                           FontSize="14"
                                           Margin="0,0,5,0"
                                           Cursor="Hand"
                                           MouseLeftButtonDown="EditTag_MouseLeftButtonDown"/>

                                <Button Content="✕"
                                        Style="{StaticResource TagRemoveButtonStyle}"
                                        Click="DeleteTag_Click"
                                        Tag="{Binding}"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,10,0,0">
            <Button Content="Ajouter" Width="70" Margin="0,0,5,0" Click="AddTag_Click"/>
            <Button Content="Fermer" Width="70" Click="Close_Click"/>
        </StackPanel>
    </Grid>

</Window>
